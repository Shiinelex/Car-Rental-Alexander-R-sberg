@page "/"
@using Car_Rental.Common.Classes
@using Car_Rental.Common.Enums
@using Car_Rental.Business.Classes

@inject BookingProcessor bp;

<PageTitle>Car Rental Assignment - Alexander Råsberg</PageTitle>

<h1>Car Rental Assignment - Alexander Råsberg</h1>

<h4>Vehicles</h4>
<table class="table table-hover border visible border-3 border-black">
    <thead>
        <tr>
            <th scope="col">RegNo</th>
            <th scope="col">Brand</th>
            <th scope="col">Odometer</th>
            <th scope="col">Cost KM</th>
            <th scope="col">Vehicle Type</th>
            <th scope="col">$ Day</th>
            <th scope="col">Status</th>
        </tr>
        <!--<tr>
        For VG Assignment
        <th scope="col"><input class="inputClass" placeholder="Reg Number" /></th>
        <th scope="col"><input class="inputClass" placeholder="Brand" /></th>
        <th scope="col"><input class="inputClass" type="number" placeholder="KM" /></th>
        <th scope="col"><input class="inputClass" type="number" placeholder="Cost KM" /></th>
        <th scope="col"><input class="inputClass" placeholder="Vehicle Type" /></th>
        <th scope="col"><input class="inputClass" placeholder="$ Day" /></th>

        <th scope="col">
        <select class="selectForm" placeholder="$ Day">

        <option value="au">Australia</option>
        <option value="ca">Canada</option>
        <option value="usa">USA</option>
        </select></th>
        </tr>
        -->
    </thead>
    <tbody>
        <!--Creates the Vehicle table-rows-->
        @foreach(var vehicle in bp.vehicles)
        {
            <tr class="@((vehicle.VehicleStatus == VehicleStatus.Booked ? "table-danger" : ""))">
                <td style="font-weight: bold">@vehicle.RegNo</td>
                <td>@vehicle.Brand</td>
                <td>@vehicle.Odometer</td>
                <td>@vehicle.CostKM</td>
                <td>@vehicle.Type</td>
                <td>@vehicle.CostDay</td>
                <td>
                    @switch (vehicle.VehicleStatus)
                    {
                        case VehicleStatus.Available:
                            <span class="badge text-bg-success">Available</span>
                            break;
                        case VehicleStatus.Booked:
                            <span class="badge text-bg-danger">Booked</span>
                            break;
                    }
                </td>
            </tr>
        }
    </tbody>
</table>

<h4>Bookings</h4>
<table class="table table-hover border visible border-3 border-black">
    <thead>
        <tr>
            <th scope="col">RegNo</th>
            <th scope="col">Customer</th>
            <th scope="col">KM Rented</th>
            <th scope="col">KM Returned</th>
            <th scope="col">Rented</th>
            <th scope="col">Returned</th>
            <th scope="col">Cost</th>
            <th scope="col">Status</th>
        </tr>
    </thead> 
    <tbody>
        <!--Creates the bookings table-rows-->
        @foreach (var booking in bp.bookings)
        {
            <tr class="@((booking.IsOpen == false ? "table-danger" : ""))">
                <td style="font-weight: bold">@booking.RegNo</td>
                <td>@booking.Customer</td>
                <td>@booking.KmRented</td>
                <td>@booking.KmReturned</td>
                <td>@booking.DateRented.ToShortDateString()</td>
                <td>@booking.DateReturned.ToShortDateString()</td>
                <td>@booking.Cost</td>
                <td>
                    @switch (booking.IsOpen)
                    {
                        case true:
                            <span class="badge text-bg-success">Open</span>
                            break;
                        case false:
                            <span class="badge text-bg-danger">Closed</span>
                            break;
                    }
                </td>
            </tr>
        }
    </tbody>
</table>

<h4>Customers</h4>
<table class="table table-striped table-hover border visible border-3 border-black" style="width: 50%">
    <thead>
        <tr>
            <th scope="col">SSN</th>
            <th scope="col">Last Name</th>
            <th scope="col">First Name</th>
        </tr>
        <!--
            For VG Assignment
            <tr>
            <th scope="col"><input placeholder="SSN" /></th>
            <th scope="col"><input placeholder="Last Name" /></th>
            <th scope="col"><input placeholder="First Name" /></th>
            <th scope="col">
            </th>
        </tr>
        -->
    </thead>
    <tbody>
        <!--Creates the Customer table-rows-->
        @foreach (var person in bp.persons)
        {
            <tr>
                <td style ="font-weight: bold">@person.SSN</td>
                <td>@person.FirstName</td>
                <td>@person.LastName</td>
            </tr>
        }
    </tbody>
</table>